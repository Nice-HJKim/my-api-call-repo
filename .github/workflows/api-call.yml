name: API Call Demo (Env Scope Test)
on:
  workflow_dispatch:

jobs:
  call-api:
    runs-on: ubuntu-latest
    env:
      TOKEN: "JOB_LEVEL_TOKEN_ABC"   # Job 전체에 적용되는 값

    steps:
      - name: Print Actor
        run: echo "실행자: $GITHUB_ACTOR"

      - name: Show Job-level TOKEN
        run: echo "Job-level TOKEN 값은: $TOKEN"

      - name: Call GitHub API (Step-level TOKEN 재정의)
        run: |
          echo "이 Step에서 TOKEN 값은: $TOKEN"
          BASE_URL="https://api.github.com/repos/${{ github.repository }}"
          curl -H "Authorization: Bearer $TOKEN" \
               -H "Accept: application/vnd.github+json" \
               "$BASE_URL"
        env:
          TOKEN: "STEP_LEVEL_TOKEN_XYZ"   # Step 한정으로 다른 값

